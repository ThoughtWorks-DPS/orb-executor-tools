# src/examples/simple-workflow.yaml

description: |
  A simple circleci docker executor pipeline workflow, using orb defaults. 
  
  - Git push on trunk triggers dev-build, git tag for release
  - builds Dockerfile
  - development builds are tagged with dev.${CIRCLE_SHA1:0:7}
  - docker.io credentials are set with the default ENV variables
  - no configuration tests are performed
  - no cve or cis scan is performed

usage:
  version: 2.1

  orbs:
    executor-tools: twdps/executor-tools@0.1.0

  workflows:
    version: 2

    my-circleci-executor-image-pipeline:
      jobs:
        - executor-tools/dev-release:
            image: org/my-circleci-executor
            filters:
              branches:
                only: main
              tags:
                ignore: /.*/
        - executor-tools/publish:
            image: org/my-circleci-executor
            filters:
              branches:
                ignore: /.*/
              tags:
                only: /.*/
